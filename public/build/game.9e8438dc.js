(self.webpackChunk=self.webpackChunk||[]).push([[757],{8236:(e,n,t)=>{"use strict";var o=t(538),s=(0,o.createTextVNode)(" Game ");var a=(0,o.createVNode)("div",{id:"map",style:{width:"100%",height:"1000px"}},null,-1);t(6992),t(1539),t(8783),t(3948),t(285),t(1249);const r={data:function(){return{map:null,connection:null,userId:null,persons:[]}},mounted:function(){var e=this,n=document.createElement("script");n.setAttribute("src","https://api-maps.yandex.ru/2.1/?apikey=bfd21a41-ba64-49a3-a2bd-b7d139932aa5&lang=ru_RU"),document.head.appendChild(n),n.onload=function(){return ymaps.ready(e.initMap)},this.connection=new WebSocket("ws://localhost:3001")},methods:{initMap:function(){var e=this;this.userId=new URL(document.location).searchParams.get("userId"),this.map=new ymaps.Map("map",{center:[54.660901,20.932067],zoom:19,behaviors:[],controls:[],type:"yandex#hybrid"}),ymaps.geolocation.get().then((function(n){e.map.setCenter(n.geoObjects.position,19);var t=new ymaps.Placemark(n.geoObjects.position,{},{preset:"islands#redIcon"}),o=new ymaps.Circle([n.geoObjects.position,20]);e.map.geoObjects.add(t),e.map.geoObjects.add(o);var s={userId:e.userId,position:n.geoObjects.position};e.connection.send(JSON.stringify(s)),e.connection.addEventListener("message",(function(e){var n=e.data;console.log(n),n.userId,this.userId}))}),(function(e){console.log("������: "+e)}))},addPerson:function(e){this.persons.push(e);var n=new ymaps.Placemark(result.geoObjects.position,{},{preset:"islands#redIcon"});this.map.geoObjects.add(n)}},render:function(e,n,t,s,r,c){return(0,o.openBlock)(),(0,o.createBlock)("div",null,[a])}},c={components:{Map:r}};console.log("v4"),c.render=function(e,n,t,a,r,c){var i=(0,o.resolveComponent)("Map");return(0,o.openBlock)(),(0,o.createBlock)("div",null,[s,(0,o.createVNode)(i)])};const i=c;(0,o.createApp)(i).mount("#game")}},e=>{"use strict";e.O(0,[637],(()=>{return n=8236,e(e.s=n);var n}));e.O()}]);